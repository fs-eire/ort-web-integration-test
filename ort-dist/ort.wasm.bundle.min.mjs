/*!
 * ONNX Runtime Web v1.23.0-dev.20250906-ecb26fb775
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
var jt=Object.defineProperty;var Xa=Object.getOwnPropertyDescriptor;var Za=Object.getOwnPropertyNames;var Qa=Object.prototype.hasOwnProperty;var Yt=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(t,a)=>(typeof require<"u"?require:t)[a]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var R=(n,t)=>()=>(n&&(t=n(n=0)),t);var st=(n,t)=>{for(var a in t)jt(n,a,{get:t[a],enumerable:!0})},Ka=(n,t,a,u)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Za(t))!Qa.call(n,o)&&o!==a&&jt(n,o,{get:()=>t[o],enumerable:!(u=Xa(t,o))||u.enumerable});return n};var Jt=n=>Ka(jt({},"__esModule",{value:!0}),n);var it,Ie,je,es,pr,qt=R(()=>{"use strict";it=new Map,Ie=[],je=(n,t,a)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){let u=it.get(n);if(u===void 0)it.set(n,{backend:t,priority:a});else{if(u.priority>a)return;if(u.priority===a&&u.backend!==t)throw new Error(`cannot register backend "${n}" using priority ${a}`)}if(a>=0){let o=Ie.indexOf(n);o!==-1&&Ie.splice(o,1);for(let d=0;d<Ie.length;d++)if(it.get(Ie[d]).priority<=a){Ie.splice(d,0,n);return}Ie.push(n)}return}throw new TypeError("not a valid backend")},es=async n=>{let t=it.get(n);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{let a=!!t.initPromise;try{return a||(t.initPromise=t.backend.init(n)),await t.initPromise,t.initialized=!0,t.backend}catch(u){return a||(t.error=`${u}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},pr=async n=>{let t=n.executionProviders||[],a=t.map(m=>typeof m=="string"?m:m.name),u=a.length===0?Ie:a,o,d=[],c=new Set;for(let m of u){let h=await es(m);typeof h=="string"?d.push({name:m,err:h}):(o||(o=h),o===h&&c.add(m))}if(!o)throw new Error(`no available backend found. ERR: ${d.map(m=>`[${m.name}] ${m.err}`).join(", ")}`);for(let{name:m,err:h}of d)a.includes(m)&&console.warn(`removing requested execution provider "${m}" from session options because it is not available: ${h}`);let l=t.filter(m=>c.has(typeof m=="string"?m:m.name));return[o,new Proxy(n,{get:(m,h)=>h==="executionProviders"?l:Reflect.get(m,h)})]}});var mr=R(()=>{"use strict";qt()});var hr,wr=R(()=>{"use strict";hr="1.23.0-dev.20250703-7fc6235861"});var br,X,Xt=R(()=>{"use strict";wr();br="warning",X={wasm:{},webgl:{},webgpu:{},versions:{common:hr},set logLevel(n){if(n!==void 0){if(typeof n!="string"||["verbose","info","warning","error","fatal"].indexOf(n)===-1)throw new Error(`Unsupported logging level: ${n}`);br=n}},get logLevel(){return br}};Object.defineProperty(X,"logLevel",{enumerable:!0})});var z,yr=R(()=>{"use strict";Xt();z=X});var gr,Er,Tr=R(()=>{"use strict";gr=(n,t)=>{let a=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);a.width=n.dims[3],a.height=n.dims[2];let u=a.getContext("2d");if(u!=null){let o,d;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(o=n.dims[2],d=n.dims[3]):(o=n.dims[3],d=n.dims[2]);let c=t?.format!==void 0?t.format:"RGB",l=t?.norm,m,h;l===void 0||l.mean===void 0?m=[255,255,255,255]:typeof l.mean=="number"?m=[l.mean,l.mean,l.mean,l.mean]:(m=[l.mean[0],l.mean[1],l.mean[2],0],l.mean[3]!==void 0&&(m[3]=l.mean[3])),l===void 0||l.bias===void 0?h=[0,0,0,0]:typeof l.bias=="number"?h=[l.bias,l.bias,l.bias,l.bias]:(h=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(h[3]=l.bias[3]));let w=d*o,g=0,y=w,S=w*2,A=-1;c==="RGBA"?(g=0,y=w,S=w*2,A=w*3):c==="RGB"?(g=0,y=w,S=w*2):c==="RBG"&&(g=0,S=w,y=w*2);for(let U=0;U<d;U++)for(let N=0;N<o;N++){let O=(n.data[g++]-h[0])*m[0],I=(n.data[y++]-h[1])*m[1],H=(n.data[S++]-h[2])*m[2],M=A===-1?255:(n.data[A++]-h[3])*m[3];u.fillStyle="rgba("+O+","+I+","+H+","+M+")",u.fillRect(N,U,1,1)}if("toDataURL"in a)return a.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},Er=(n,t)=>{let a=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),u;if(a!=null){let o,d,c;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(o=n.dims[2],d=n.dims[1],c=n.dims[3]):(o=n.dims[3],d=n.dims[2],c=n.dims[1]);let l=t!==void 0&&t.format!==void 0?t.format:"RGB",m=t?.norm,h,w;m===void 0||m.mean===void 0?h=[255,255,255,255]:typeof m.mean=="number"?h=[m.mean,m.mean,m.mean,m.mean]:(h=[m.mean[0],m.mean[1],m.mean[2],255],m.mean[3]!==void 0&&(h[3]=m.mean[3])),m===void 0||m.bias===void 0?w=[0,0,0,0]:typeof m.bias=="number"?w=[m.bias,m.bias,m.bias,m.bias]:(w=[m.bias[0],m.bias[1],m.bias[2],0],m.bias[3]!==void 0&&(w[3]=m.bias[3]));let g=d*o;if(t!==void 0&&(t.format!==void 0&&c===4&&t.format!=="RGBA"||c===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let y=4,S=0,A=1,U=2,N=3,O=0,I=g,H=g*2,M=-1;l==="RGBA"?(O=0,I=g,H=g*2,M=g*3):l==="RGB"?(O=0,I=g,H=g*2):l==="RBG"&&(O=0,H=g,I=g*2),u=a.createImageData(o,d);for(let P=0;P<d*o;S+=y,A+=y,U+=y,N+=y,P++)u.data[S]=(n.data[O++]-w[0])*h[0],u.data[A]=(n.data[I++]-w[1])*h[1],u.data[U]=(n.data[H++]-w[2])*h[2],u.data[N]=M===-1?255:(n.data[M++]-w[3])*h[3]}else throw new Error("Can not access image data");return u}});var Zt,Sr,vr,Or,Ar,Ir,Br=R(()=>{"use strict";ut();Zt=(n,t)=>{if(n===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:a,width:u}=t,o=t.norm??{mean:255,bias:0},d,c;typeof o.mean=="number"?d=[o.mean,o.mean,o.mean,o.mean]:d=[o.mean[0],o.mean[1],o.mean[2],o.mean[3]??255],typeof o.bias=="number"?c=[o.bias,o.bias,o.bias,o.bias]:c=[o.bias[0],o.bias[1],o.bias[2],o.bias[3]??0];let l=t.format!==void 0?t.format:"RGBA",m=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",h=a*u,w=m==="RGBA"?new Float32Array(h*4):new Float32Array(h*3),g=4,y=0,S=1,A=2,U=3,N=0,O=h,I=h*2,H=-1;l==="RGB"&&(g=3,y=0,S=1,A=2,U=-1),m==="RGBA"?H=h*3:m==="RBG"?(N=0,I=h,O=h*2):m==="BGR"&&(I=0,O=h,N=h*2);for(let P=0;P<h;P++,y+=g,A+=g,S+=g,U+=g)w[N++]=(n[y]+c[0])/d[0],w[O++]=(n[S]+c[1])/d[1],w[I++]=(n[A]+c[2])/d[2],H!==-1&&U!==-1&&(w[H++]=(n[U]+c[3])/d[3]);return m==="RGBA"?new ne("float32",w,[1,4,a,u]):new ne("float32",w,[1,3,a,u])},Sr=async(n,t)=>{let a=typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement,u=typeof ImageData<"u"&&n instanceof ImageData,o=typeof ImageBitmap<"u"&&n instanceof ImageBitmap,d=typeof n=="string",c,l=t??{},m=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},h=w=>typeof HTMLCanvasElement<"u"&&w instanceof HTMLCanvasElement||w instanceof OffscreenCanvas?w.getContext("2d"):null;if(a){let w=m();w.width=n.width,w.height=n.height;let g=h(w);if(g!=null){let y=n.height,S=n.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(y=t.resizedHeight,S=t.resizedWidth),t!==void 0){if(l=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");l.tensorFormat="RGBA",l.height=y,l.width=S}else l.tensorFormat="RGBA",l.height=y,l.width=S;g.drawImage(n,0,0),c=g.getImageData(0,0,S,y).data}else throw new Error("Can not access image data")}else if(u){let w,g;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(w=t.resizedHeight,g=t.resizedWidth):(w=n.height,g=n.width),t!==void 0&&(l=t),l.format="RGBA",l.height=w,l.width=g,t!==void 0){let y=m();y.width=g,y.height=w;let S=h(y);if(S!=null)S.putImageData(n,0,0),c=S.getImageData(0,0,g,w).data;else throw new Error("Can not access image data")}else c=n.data}else if(o){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");let w=m();w.width=n.width,w.height=n.height;let g=h(w);if(g!=null){let y=n.height,S=n.width;return g.drawImage(n,0,0,S,y),c=g.getImageData(0,0,S,y).data,l.height=y,l.width=S,Zt(c,l)}else throw new Error("Can not access image data")}else{if(d)return new Promise((w,g)=>{let y=m(),S=h(y);if(!n||!S)return g();let A=new Image;A.crossOrigin="Anonymous",A.src=n,A.onload=()=>{y.width=A.width,y.height=A.height,S.drawImage(A,0,0,y.width,y.height);let U=S.getImageData(0,0,y.width,y.height);l.height=y.height,l.width=y.width,w(Zt(U.data,l))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(c!==void 0)return Zt(c,l);throw new Error("Input data provided is not supported - aborted tensor creation")},vr=(n,t)=>{let{width:a,height:u,download:o,dispose:d}=t,c=[1,u,a,4];return new ne({location:"texture",type:"float32",texture:n,dims:c,download:o,dispose:d})},Or=(n,t)=>{let{dataType:a,dims:u,download:o,dispose:d}=t;return new ne({location:"gpu-buffer",type:a??"float32",gpuBuffer:n,dims:u,download:o,dispose:d})},Ar=(n,t)=>{let{dataType:a,dims:u,download:o,dispose:d}=t;return new ne({location:"ml-tensor",type:a??"float32",mlTensor:n,dims:u,download:o,dispose:d})},Ir=(n,t,a)=>new ne({location:"cpu-pinned",type:n,data:t,dims:a??[t.length]})});var Be,Ye,Pr,Lr,Dr=R(()=>{"use strict";Be=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),Ye=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),Pr=!1,Lr=()=>{if(!Pr){Pr=!0;let n=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,a=globalThis.Float16Array,u=typeof a<"u"&&a.from;n&&(Be.set("int64",BigInt64Array),Ye.set(BigInt64Array,"int64")),t&&(Be.set("uint64",BigUint64Array),Ye.set(BigUint64Array,"uint64")),u?(Be.set("float16",a),Ye.set(a,"float16")):Be.set("float16",Uint16Array)}}});var _r,Ur,xr=R(()=>{"use strict";ut();_r=n=>{let t=1;for(let a=0;a<n.length;a++){let u=n[a];if(typeof u!="number"||!Number.isSafeInteger(u))throw new TypeError(`dims[${a}] must be an integer, got: ${u}`);if(u<0)throw new RangeError(`dims[${a}] must be a non-negative integer, got: ${u}`);t*=u}return t},Ur=(n,t)=>{switch(n.location){case"cpu":return new ne(n.type,n.data,t);case"cpu-pinned":return new ne({location:"cpu-pinned",data:n.data,type:n.type,dims:t});case"texture":return new ne({location:"texture",texture:n.texture,type:n.type,dims:t});case"gpu-buffer":return new ne({location:"gpu-buffer",gpuBuffer:n.gpuBuffer,type:n.type,dims:t});case"ml-tensor":return new ne({location:"ml-tensor",mlTensor:n.mlTensor,type:n.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${n.location} is not supported`)}}});var ne,ut=R(()=>{"use strict";Tr();Br();Dr();xr();ne=class{constructor(t,a,u){Lr();let o,d;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,o=t.type,d=t.dims,t.location){case"cpu-pinned":{let l=Be.get(o);if(!l)throw new TypeError(`unsupported type "${o}" to create tensor from pinned buffer`);if(!(t.data instanceof l))throw new TypeError(`buffer should be of type ${l.name}`);this.cpuData=t.data;break}case"texture":{if(o!=="float32")throw new TypeError(`unsupported type "${o}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(o!=="float32"&&o!=="float16"&&o!=="int32"&&o!=="int64"&&o!=="uint32"&&o!=="uint8"&&o!=="bool"&&o!=="uint4"&&o!=="int4")throw new TypeError(`unsupported type "${o}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}case"ml-tensor":{if(o!=="float32"&&o!=="float16"&&o!=="int32"&&o!=="int64"&&o!=="uint32"&&o!=="uint64"&&o!=="int8"&&o!=="uint8"&&o!=="bool"&&o!=="uint4"&&o!=="int4")throw new TypeError(`unsupported type "${o}" to create tensor from MLTensor`);this.mlTensorData=t.mlTensor,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let l,m;if(typeof t=="string")if(o=t,m=u,t==="string"){if(!Array.isArray(a))throw new TypeError("A string tensor's data must be a string array.");l=a}else{let h=Be.get(t);if(h===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(a)){if(t==="float16"&&h===Uint16Array||t==="uint4"||t==="int4")throw new TypeError(`Creating a ${t} tensor from number array is not supported. Please use ${h.name} as data.`);t==="uint64"||t==="int64"?l=h.from(a,BigInt):l=h.from(a)}else if(a instanceof h)l=a;else if(a instanceof Uint8ClampedArray)if(t==="uint8")l=Uint8Array.from(a);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(t==="float16"&&a instanceof Uint16Array&&h!==Uint16Array)l=new globalThis.Float16Array(a.buffer,a.byteOffset,a.length);else throw new TypeError(`A ${o} tensor's data must be type of ${h}`)}else if(m=a,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let h=typeof t[0];if(h==="string")o="string",l=t;else if(h==="boolean")o="bool",l=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${h}.`)}else if(t instanceof Uint8ClampedArray)o="uint8",l=Uint8Array.from(t);else{let h=Ye.get(t.constructor);if(h===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);o=h,l=t}if(m===void 0)m=[l.length];else if(!Array.isArray(m))throw new TypeError("A tensor's dims must be a number array");d=m,this.cpuData=l,this.dataLocation="cpu"}let c=_r(d);if(this.cpuData&&c!==this.cpuData.length&&!((o==="uint4"||o==="int4")&&Math.ceil(c/2)===this.cpuData.length))throw new Error(`Tensor's size(${c}) does not match data length(${this.cpuData.length}).`);this.type=o,this.dims=d,this.size=c}static async fromImage(t,a){return Sr(t,a)}static fromTexture(t,a){return vr(t,a)}static fromGpuBuffer(t,a){return Or(t,a)}static fromMLTensor(t,a){return Ar(t,a)}static fromPinnedBuffer(t,a,u){return Ir(t,a,u)}toDataURL(t){return gr(this,t)}toImageData(t){return Er(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let a=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=a,t&&this.disposer&&(this.disposer(),this.disposer=void 0),a}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return Ur(this,t)}}});var de,Qt=R(()=>{"use strict";ut();de=ne});var Mr,Cr,Pe,Le,De,_e,Kt=R(()=>{"use strict";Xt();Mr=(n,t)=>{(typeof X.trace>"u"?!X.wasm.trace:!X.trace)||console.timeStamp(`${n}::ORT::${t}`)},Cr=(n,t)=>{let a=new Error().stack?.split(/\r\n|\r|\n/g)||[],u=!1;for(let o=0;o<a.length;o++){if(u&&!a[o].includes("TRACE_FUNC")){let d=`FUNC_${n}::${a[o].trim().split(" ")[1]}`;t&&(d+=`::${t}`),Mr("CPU",d);return}a[o].includes("TRACE_FUNC")&&(u=!0)}},Pe=n=>{(typeof X.trace>"u"?!X.wasm.trace:!X.trace)||Cr("BEGIN",n)},Le=n=>{(typeof X.trace>"u"?!X.wasm.trace:!X.trace)||Cr("END",n)},De=n=>{(typeof X.trace>"u"?!X.wasm.trace:!X.trace)||console.time(`ORT::${n}`)},_e=n=>{(typeof X.trace>"u"?!X.wasm.trace:!X.trace)||console.timeEnd(`ORT::${n}`)}});var ft,Rr=R(()=>{"use strict";qt();Qt();Kt();ft=class n{constructor(t){this.handler=t}async run(t,a,u){Pe(),De("InferenceSession.run");let o={},d={};if(typeof t!="object"||t===null||t instanceof de||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let c=!0;if(typeof a=="object"){if(a===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(a instanceof de)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(a)){if(a.length===0)throw new TypeError("'fetches' cannot be an empty array.");c=!1;for(let h of a){if(typeof h!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(h)===-1)throw new RangeError(`'fetches' contains invalid output name: ${h}.`);o[h]=null}if(typeof u=="object"&&u!==null)d=u;else if(typeof u<"u")throw new TypeError("'options' must be an object.")}else{let h=!1,w=Object.getOwnPropertyNames(a);for(let g of this.outputNames)if(w.indexOf(g)!==-1){let y=a[g];(y===null||y instanceof de)&&(h=!0,c=!1,o[g]=y)}if(h){if(typeof u=="object"&&u!==null)d=u;else if(typeof u<"u")throw new TypeError("'options' must be an object.")}else d=a}}else if(typeof a<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let h of this.inputNames)if(typeof t[h]>"u")throw new Error(`input '${h}' is missing in 'feeds'.`);if(c)for(let h of this.outputNames)o[h]=null;let l=await this.handler.run(t,o,d),m={};for(let h in l)if(Object.hasOwnProperty.call(l,h)){let w=l[h];w instanceof de?m[h]=w:m[h]=new de(w.type,w.data,w.dims)}return _e("InferenceSession.run"),Le(),m}async release(){return this.handler.dispose()}static async create(t,a,u,o){Pe(),De("InferenceSession.create");let d,c={};if(typeof t=="string"){if(d=t,typeof a=="object"&&a!==null)c=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(d=t,typeof a=="object"&&a!==null)c=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){let w=t,g=0,y=t.byteLength;if(typeof a=="object"&&a!==null)c=a;else if(typeof a=="number"){if(g=a,!Number.isSafeInteger(g))throw new RangeError("'byteOffset' must be an integer.");if(g<0||g>=w.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${w.byteLength}).`);if(y=t.byteLength-g,typeof u=="number"){if(y=u,!Number.isSafeInteger(y))throw new RangeError("'byteLength' must be an integer.");if(y<=0||g+y>w.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${w.byteLength-g}].`);if(typeof o=="object"&&o!==null)c=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(typeof u<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof a<"u")throw new TypeError("'options' must be an object.");d=new Uint8Array(w,g,y)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[l,m]=await pr(c),h=await l.createInferenceSessionHandler(d,m);return _e("InferenceSession.create"),Le(),new n(h)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}get inputMetadata(){return this.handler.inputMetadata}get outputMetadata(){return this.handler.outputMetadata}}});var ts,Fr=R(()=>{"use strict";Rr();ts=ft});var Nr=R(()=>{"use strict"});var kr=R(()=>{"use strict"});var Wr=R(()=>{"use strict"});var Gr=R(()=>{"use strict"});var en={};st(en,{InferenceSession:()=>ts,TRACE:()=>Mr,TRACE_EVENT_BEGIN:()=>De,TRACE_EVENT_END:()=>_e,TRACE_FUNC_BEGIN:()=>Pe,TRACE_FUNC_END:()=>Le,Tensor:()=>de,env:()=>z,registerBackend:()=>je});var Te=R(()=>{"use strict";mr();yr();Fr();Qt();Nr();kr();Kt();Wr();Gr()});var ct=R(()=>{"use strict"});var Vr={};st(Vr,{default:()=>ns});var zr,Hr,ns,jr=R(()=>{"use strict";tn();Ue();lt();zr="ort-wasm-proxy-worker",Hr=globalThis.self?.name===zr;Hr&&(self.onmessage=n=>{let{type:t,in:a}=n.data;try{switch(t){case"init-wasm":dt(a.wasm).then(()=>{pt(a).then(()=>{postMessage({type:t})},u=>{postMessage({type:t,err:u})})},u=>{postMessage({type:t,err:u})});break;case"init-ep":{let{epName:u,env:o}=a;mt(o,u).then(()=>{postMessage({type:t})},d=>{postMessage({type:t,err:d})});break}case"copy-from":{let{buffer:u}=a,o=Je(u);postMessage({type:t,out:o});break}case"create":{let{model:u,options:o}=a;ht(u,o).then(d=>{postMessage({type:t,out:d})},d=>{postMessage({type:t,err:d})});break}case"release":wt(a),postMessage({type:t});break;case"run":{let{sessionId:u,inputIndices:o,inputs:d,outputIndices:c,options:l}=a;bt(u,o,d,c,new Array(c.length).fill(null),l).then(m=>{m.some(h=>h[3]!=="cpu")?postMessage({type:t,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:t,out:m},gt([...d,...m]))},m=>{postMessage({type:t,err:m})});break}case"end-profiling":yt(a),postMessage({type:t});break;default:}}catch(u){postMessage({type:t,err:u})}});ns=Hr?null:n=>new Worker(n??ae,{type:"module",name:zr})});var Jr={};st(Jr,{default:()=>rs});async function Yr(n={}){var t=n,a=typeof window=="object",u=typeof WorkerGlobalScope<"u",o=u&&self.name?.startsWith("em-pthread");t.mountExternalData=(e,r)=>{e.startsWith("./")&&(e=e.substring(2)),(t.Rb||(t.Rb=new Map)).set(e,r)},t.unmountExternalData=()=>{delete t.Rb};var d,c,l=globalThis.SharedArrayBuffer??new WebAssembly.Memory({initial:0,maximum:0,kc:!0}).buffer.constructor,m=(e,r)=>{throw r},h=import.meta.url,w="";if(a||u){try{w=new URL(".",h).href}catch{}u&&(c=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),d=async e=>{if(Z(e))return new Promise((i,s)=>{var f=new XMLHttpRequest;f.open("GET",e,!0),f.responseType="arraybuffer",f.onload=()=>{f.status==200||f.status==0&&f.response?i(f.response):s(f.status)},f.onerror=s,f.send(null)});var r=await fetch(e,{credentials:"same-origin"});if(r.ok)return r.arrayBuffer();throw Error(r.status+" : "+r.url)}}var g,y,S,A,U,N,O,I=console.log.bind(console),H=console.error.bind(console),M=I,P=H,j=!1,Z=e=>e.startsWith("file://");function b(){oe.buffer!=Y.buffer&&q()}if(o){let e=function(r){try{var i=r.data,s=i.Qb;if(s==="load"){let f=[];self.onmessage=p=>f.push(p),O=()=>{postMessage({Qb:"loaded"});for(let p of f)e(p);self.onmessage=e};for(let p of i.Zb)t[p]&&!t[p].proxy||(t[p]=(...E)=>{postMessage({Qb:"callHandler",Yb:p,args:E})},p=="print"&&(M=t[p]),p=="printErr"&&(P=t[p]));oe=i.ec,q(),N(i.fc)}else if(s==="run"){(function(f){var p=(b(),k)[f+52>>>2>>>0];f=(b(),k)[f+56>>>2>>>0],ur(p,p-f),L(p)})(i.Ob),$t(i.Ob,0,0,1,0,0),hn(),Rt(i.Ob),me||=!0;try{Io(i.bc,i.Tb)}catch(f){if(f!="unwind")throw f}}else i.target!=="setimmediate"&&(s==="checkMailbox"?me&&nt():s&&(P(`worker: received unknown command ${s}`),P(i)))}catch(f){throw rr(),f}};var Ss=e,me=!1;self.onunhandledrejection=r=>{throw r.reason||r},self.onmessage=e}var oe,Y,Q,Ce,T,k,Re,K,ee,V=!1;function q(){var e=oe.buffer;t.HEAP8=Y=new Int8Array(e),Ce=new Int16Array(e),t.HEAPU8=Q=new Uint8Array(e),new Uint16Array(e),t.HEAP32=T=new Int32Array(e),t.HEAPU32=k=new Uint32Array(e),Re=new Float32Array(e),K=new Float64Array(e),ee=new BigInt64Array(e),new BigUint64Array(e)}function _t(){V=!0,o?O():Ee.Ta()}var Se,pe=0,ye=null;function Qe(){if(--pe==0&&ye){var e=ye;ye=null,e()}}function re(e){throw P(e="Aborted("+e+")"),j=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),U?.(e),e}function ue(){return{a:{Q:fa,f:Bo,w:Po,e:Lo,j:Do,g:_o,R:Uo,b:xo,F:Mo,ta:vn,k:Co,J:In,Ja:Bn,pa:Pn,ra:Ln,Ka:Dn,Ha:_n,Aa:Un,Ga:xn,X:Mn,qa:Cn,na:Rn,Ia:Fn,oa:Nn,Pa:Ro,Da:Fo,la:No,ua:ko,ia:Wo,S:Go,Ca:Rt,Ma:$o,xa:zo,ya:Ho,za:Vo,va:zn,wa:Hn,ja:Vn,Ra:Yo,Oa:Xo,U:Zo,T:Qo,Na:Jo,E:Ko,La:ea,ma:ta,u:jo,G:na,P:ot,ka:ra,ba:oa,Sa:aa,Ea:Jn,Fa:qn,sa:Ut,K:Xn,W:Zn,Ba:Qn,V:Kn,Z:Va,L:Na,_:Ha,M:Fa,v:La,c:pa,l:la,n:ca,r:va,da:xa,x:Ia,o:ha,N:Ca,C:ka,H:Ua,$:za,aa:$a,ca:Ma,O:_a,ea:Da,z:Ba,D:Ra,d:ma,q:wa,i:da,Y:ja,m:ba,p:ya,s:Sa,t:ga,y:Oa,fa:Pa,A:Wa,I:Aa,B:Ga,ga:Ta,ha:Ea,h:ia,a:oe,Qa:Ke}}}class he{name="ExitStatus";constructor(r){this.message=`Program terminated with exit(${r})`,this.status=r}}var J=e=>{e.terminate(),e.onmessage=()=>{}},$=[],fe=e=>{ge.length==0&&(bn(),wn(ge[0]));var r=ge.pop();if(!r)return 6;ze.push(r),ve[e.Ob]=r,r.Ob=e.Ob;var i={Qb:"run",bc:e.ac,Tb:e.Tb,Ob:e.Ob};return r.postMessage(i,e.Xb),0},ce=0,W=(e,r,...i)=>{for(var s=2*i.length,f=D(),p=Ht(8*s),E=p>>>3,v=0;v<i.length;v++){var B=i[v];typeof B=="bigint"?((b(),ee)[E+2*v>>>0]=1n,(b(),ee)[E+2*v+1>>>0]=B):((b(),ee)[E+2*v>>>0]=0n,(b(),K)[E+2*v+1>>>0]=B)}return e=or(e,0,s,p,r),L(f),e};function Ke(e){if(o)return W(0,1,e);if(S=e,!(0<ce)){for(var r of ze)J(r);for(r of ge)J(r);ge=[],ze=[],ve={},j=!0}m(0,new he(e))}function dn(e){if(o)return W(1,0,e);Ut(e)}var Ut=e=>{if(S=e,o)throw dn(e),"unwind";Ke(e)},ge=[],ze=[],pn=[],ve={},mn=e=>{var r=e.Ob;delete ve[r],ge.push(e),ze.splice(ze.indexOf(e),1),e.Ob=0,ar(r)};function hn(){pn.forEach(e=>e())}var wn=e=>new Promise(r=>{e.onmessage=f=>{var p=(f=f.data).Qb;if(f.Sb&&f.Sb!=Gt()){var E=ve[f.Sb];E?E.postMessage(f,f.Xb):P(`Internal error! Worker sent a message "${p}" to target pthread ${f.Sb}, but that thread no longer exists!`)}else p==="checkMailbox"?nt():p==="spawnThread"?fe(f):p==="cleanupThread"?mn(ve[f.cc]):p==="loaded"?(e.loaded=!0,r(e)):f.target==="setimmediate"?e.postMessage(f):p==="callHandler"?t[f.Yb](...f.args):p&&P(`worker sent an unknown command ${p}`)},e.onerror=f=>{throw P(`worker sent an error! ${f.filename}:${f.lineno}: ${f.message}`),f};var i,s=[];for(i of[])t.propertyIsEnumerable(i)&&s.push(i);e.postMessage({Qb:"load",Zb:s,ec:oe,fc:y})});function bn(){var e=new Worker((()=>{let r=URL;return import.meta.url>"file:"&&import.meta.url<"file;"?new r("ort.wasm.bundle.min.mjs",import.meta.url):new URL(import.meta.url)})(),{type:"module",workerData:"em-pthread",name:"em-pthread"});ge.push(e)}var yn,gn=[],x=e=>{var r=gn[e];return r||(gn[e]=r=yn.get(e)),r},Io=(e,r)=>{ce=0,e=x(e)(r),0<ce?S=e:zt(e)},et=[],tt=0;function Bo(e){var r=new xt(e>>>=0);return(b(),Y)[r.Pb+12>>>0]==0&&(En(r,!0),tt--),Tn(r,!1),et.push(r),cr(e),dr(e)}var Fe=0,Po=()=>{_(0,0);var e=et.pop();fr(e.Ub),Fe=0};function En(e,r){r=r?1:0,(b(),Y)[e.Pb+12>>>0]=r}function Tn(e,r){r=r?1:0,(b(),Y)[e.Pb+13>>>0]=r}class xt{constructor(r){this.Ub=r,this.Pb=r-24}}var Mt=e=>{var r=Fe;if(!r)return Ve(0),0;var i=new xt(r);(b(),k)[i.Pb+16>>>2>>>0]=r;var s=(b(),k)[i.Pb+4>>>2>>>0];if(!s)return Ve(0),r;for(var f of e){if(f===0||f===s)break;if(lr(f,s,i.Pb+16))return Ve(f),r}return Ve(s),r};function Lo(){return Mt([])}function Do(e){return Mt([e>>>0])}function _o(e,r,i,s){return Mt([e>>>0,r>>>0,i>>>0,s>>>0])}var Uo=()=>{var e=et.pop();e||re("no exception to throw");var r=e.Ub;throw(b(),Y)[e.Pb+13>>>0]==0&&(et.push(e),Tn(e,!0),En(e,!1),tt++),Fe=r};function xo(e,r,i){var s=new xt(e>>>=0);throw r>>>=0,i>>>=0,(b(),k)[s.Pb+16>>>2>>>0]=0,(b(),k)[s.Pb+4>>>2>>>0]=r,(b(),k)[s.Pb+8>>>2>>>0]=i,tt++,Fe=e}var Mo=()=>tt;function Sn(e,r,i,s){return o?W(2,1,e,r,i,s):vn(e,r,i,s)}function vn(e,r,i,s){if(e>>>=0,i>>>=0,s>>>=0,l===void 0)return 6;var f=[];return o&&f.length===0?Sn(e,r>>>=0,i,s):(e={ac:i,Ob:e,Tb:s,Xb:f},o?(e.Qb="spawnThread",postMessage(e,f),0):fe(e))}function Co(e){throw Fe||=e>>>0,Fe}var On=typeof TextDecoder<"u"?new TextDecoder:void 0,An=(e,r=0,i,s)=>{var f=r>>>=0;if(i=f+i,s)s=i;else{for(;e[f]&&!(f>=i);)++f;s=f}if(16<s-r&&e.buffer&&On)return On.decode(e.buffer instanceof ArrayBuffer?e.subarray(r,s):e.slice(r,s));for(f="";r<s;)if(128&(i=e[r++])){var p=63&e[r++];if((224&i)==192)f+=String.fromCharCode((31&i)<<6|p);else{var E=63&e[r++];65536>(i=(240&i)==224?(15&i)<<12|p<<6|E:(7&i)<<18|p<<12|E<<6|63&e[r++])?f+=String.fromCharCode(i):(i-=65536,f+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else f+=String.fromCharCode(i);return f},Ct=(e,r,i)=>(e>>>=0)?An((b(),Q),e,r,i):"";function In(e,r,i){return o?W(3,1,e,r,i):0}function Bn(e,r){if(o)return W(4,1,e,r)}function Pn(e,r){if(o)return W(5,1,e,r)}function Ln(e,r,i){if(o)return W(6,1,e,r,i)}function Dn(e,r,i){return o?W(7,1,e,r,i):0}function _n(e,r){if(o)return W(8,1,e,r)}function Un(e,r,i){if(o)return W(9,1,e,r,i)}function xn(e,r,i,s){if(o)return W(10,1,e,r,i,s)}function Mn(e,r,i,s){if(o)return W(11,1,e,r,i,s)}function Cn(e,r,i,s){if(o)return W(12,1,e,r,i,s)}function Rn(e){if(o)return W(13,1,e)}function Fn(e,r){if(o)return W(14,1,e,r)}function Nn(e,r,i){if(o)return W(15,1,e,r,i)}var Ro=()=>re("");function Fo(e){$t(e>>>0,!u,1,!a,131072,!1),hn()}var kn=e=>{if(!j)try{if(e(),!(0<ce))try{o?zt(S):Ut(S)}catch(r){r instanceof he||r=="unwind"||m(0,r)}}catch(r){r instanceof he||r=="unwind"||m(0,r)}};function Rt(e){e>>>=0,typeof Atomics.dc=="function"&&(Atomics.dc((b(),T),e>>>2,e).value.then(nt),e+=128,Atomics.store((b(),T),e>>>2,1))}var nt=()=>{var e=Gt();e&&(Rt(e),kn(ir))};function No(e,r){(e>>>=0)==r>>>0?setTimeout(nt):o?postMessage({Sb:e,Qb:"checkMailbox"}):(e=ve[e])&&e.postMessage({Qb:"checkMailbox"})}var rt=[];function ko(e,r,i,s,f){for(r>>>=0,s/=2,rt.length=s,i=f>>>0>>>3,f=0;f<s;f++)(b(),ee)[i+2*f>>>0]?rt[f]=(b(),ee)[i+2*f+1>>>0]:rt[f]=(b(),K)[i+2*f+1>>>0];return(r?er[r]:ua[e])(...rt)}var Wo=()=>{ce=0};function Go(e){e>>>=0,o?postMessage({Qb:"cleanupThread",cc:e}):mn(ve[e])}function $o(e){}function zo(e,r){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),r>>>=0,e=new Date(1e3*e),(b(),T)[r>>>2>>>0]=e.getUTCSeconds(),(b(),T)[r+4>>>2>>>0]=e.getUTCMinutes(),(b(),T)[r+8>>>2>>>0]=e.getUTCHours(),(b(),T)[r+12>>>2>>>0]=e.getUTCDate(),(b(),T)[r+16>>>2>>>0]=e.getUTCMonth(),(b(),T)[r+20>>>2>>>0]=e.getUTCFullYear()-1900,(b(),T)[r+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,(b(),T)[r+28>>>2>>>0]=e}var Wn=e=>e%4==0&&(e%100!=0||e%400==0),Gn=[0,31,60,91,121,152,182,213,244,274,305,335],$n=[0,31,59,90,120,151,181,212,243,273,304,334];function Ho(e,r){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),r>>>=0,e=new Date(1e3*e),(b(),T)[r>>>2>>>0]=e.getSeconds(),(b(),T)[r+4>>>2>>>0]=e.getMinutes(),(b(),T)[r+8>>>2>>>0]=e.getHours(),(b(),T)[r+12>>>2>>>0]=e.getDate(),(b(),T)[r+16>>>2>>>0]=e.getMonth(),(b(),T)[r+20>>>2>>>0]=e.getFullYear()-1900,(b(),T)[r+24>>>2>>>0]=e.getDay();var i=(Wn(e.getFullYear())?Gn:$n)[e.getMonth()]+e.getDate()-1|0;(b(),T)[r+28>>>2>>>0]=i,(b(),T)[r+36>>>2>>>0]=-60*e.getTimezoneOffset(),i=new Date(e.getFullYear(),6,1).getTimezoneOffset();var s=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(i!=s&&e.getTimezoneOffset()==Math.min(s,i)),(b(),T)[r+32>>>2>>>0]=e}function Vo(e){e>>>=0;var r=new Date((b(),T)[e+20>>>2>>>0]+1900,(b(),T)[e+16>>>2>>>0],(b(),T)[e+12>>>2>>>0],(b(),T)[e+8>>>2>>>0],(b(),T)[e+4>>>2>>>0],(b(),T)[e>>>2>>>0],0),i=(b(),T)[e+32>>>2>>>0],s=r.getTimezoneOffset(),f=new Date(r.getFullYear(),6,1).getTimezoneOffset(),p=new Date(r.getFullYear(),0,1).getTimezoneOffset(),E=Math.min(p,f);return 0>i?(b(),T)[e+32>>>2>>>0]=+(f!=p&&E==s):0<i!=(E==s)&&(f=Math.max(p,f),r.setTime(r.getTime()+6e4*((0<i?E:f)-s))),(b(),T)[e+24>>>2>>>0]=r.getDay(),i=(Wn(r.getFullYear())?Gn:$n)[r.getMonth()]+r.getDate()-1|0,(b(),T)[e+28>>>2>>>0]=i,(b(),T)[e>>>2>>>0]=r.getSeconds(),(b(),T)[e+4>>>2>>>0]=r.getMinutes(),(b(),T)[e+8>>>2>>>0]=r.getHours(),(b(),T)[e+12>>>2>>>0]=r.getDate(),(b(),T)[e+16>>>2>>>0]=r.getMonth(),(b(),T)[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),BigInt(isNaN(e)?-1:e/1e3)}function zn(e,r,i,s,f,p,E){return o?W(16,1,e,r,i,s,f,p,E):-52}function Hn(e,r,i,s,f,p){if(o)return W(17,1,e,r,i,s,f,p)}var He={},jo=()=>performance.timeOrigin+performance.now();function Vn(e,r){if(o)return W(18,1,e,r);if(He[e]&&(clearTimeout(He[e].id),delete He[e]),!r)return 0;var i=setTimeout(()=>{delete He[e],kn(()=>sr(e,performance.timeOrigin+performance.now()))},r);return He[e]={id:i,lc:r},0}var Oe=(e,r,i)=>{var s=(b(),Q);if(r>>>=0,0<i){var f=r;i=r+i-1;for(var p=0;p<e.length;++p){var E=e.codePointAt(p);if(127>=E){if(r>=i)break;s[r++>>>0]=E}else if(2047>=E){if(r+1>=i)break;s[r++>>>0]=192|E>>6,s[r++>>>0]=128|63&E}else if(65535>=E){if(r+2>=i)break;s[r++>>>0]=224|E>>12,s[r++>>>0]=128|E>>6&63,s[r++>>>0]=128|63&E}else{if(r+3>=i)break;s[r++>>>0]=240|E>>18,s[r++>>>0]=128|E>>12&63,s[r++>>>0]=128|E>>6&63,s[r++>>>0]=128|63&E,p++}}s[r>>>0]=0,e=r-f}else e=0;return e};function Yo(e,r,i,s){e>>>=0,r>>>=0,i>>>=0,s>>>=0;var f=new Date().getFullYear(),p=new Date(f,0,1).getTimezoneOffset();f=new Date(f,6,1).getTimezoneOffset();var E=Math.max(p,f);(b(),k)[e>>>2>>>0]=60*E,(b(),T)[r>>>2>>>0]=+(p!=f),e=(r=v=>{var B=Math.abs(v);return`UTC${0<=v?"-":"+"}${String(Math.floor(B/60)).padStart(2,"0")}${String(B%60).padStart(2,"0")}`})(p),r=r(f),f<p?(Oe(e,i,17),Oe(r,s,17)):(Oe(e,s,17),Oe(r,i,17))}var Jo=()=>Date.now(),qo=1;function Xo(e,r,i){if(i>>>=0,!(0<=e&&3>=e))return 28;if(e===0)e=Date.now();else{if(!qo)return 52;e=performance.timeOrigin+performance.now()}return e=Math.round(1e6*e),(b(),ee)[i>>>3>>>0]=BigInt(e),0}var Ft=[];function Zo(e,r,i){e>>>=0,r>>>=0,i>>>=0,Ft.length=0;for(var s;s=(b(),Q)[r++>>>0];){var f=s!=105;i+=(f&=s!=112)&&i%8?4:0,Ft.push(s==112?(b(),k)[i>>>2>>>0]:s==106?(b(),ee)[i>>>3>>>0]:s==105?(b(),T)[i>>>2>>>0]:(b(),K)[i>>>3>>>0]),i+=f?8:4}return er[e](...Ft)}var Qo=()=>{};function Ko(e,r){return P(Ct(e>>>0,r>>>0))}var ea=()=>{throw ce+=1,"unwind"};function ta(){return 4294901760}var na=()=>navigator.hardwareConcurrency,Ae={},Nt=e=>{for(var r=0,i=0;i<e.length;++i){var s=e.charCodeAt(i);127>=s?r++:2047>=s?r+=2:55296<=s&&57343>=s?(r+=4,++i):r+=3}return r};function ot(e){if(!(2147483648&(e>>>=0)))return re("Cannot use emscripten_pc_get_function on native functions without -sUSE_OFFSET_CONVERTER"),0;if(!(e=Ae[e]))return 0;var r;if(r=/^\s+at (.*) \(.*\)$/.exec(e))e=r[1];else{if(!(r=/^(.+?)@/.exec(e)))return 0;e=r[1]}tr(ot.Wb??0),r=Nt(e)+1;var i=nr(r);return i&&Oe(e,i,r),ot.Wb=i,ot.Wb}function ra(e){e>>>=0;var r=(b(),Q).length;if(e<=r||4294901760<e)return!1;for(var i=1;4>=i;i*=2){var s=r*(1+.2/i);s=Math.min(s,e+100663296);e:{s=(Math.min(4294901760,65536*Math.ceil(Math.max(e,s)/65536))-oe.buffer.byteLength+65535)/65536|0;try{oe.grow(s),q();var f=1;break e}catch{}f=void 0}if(f)return!0}return!1}var at=e=>{var r;if(r=/\bwasm-function\[\d+\]:(0x[0-9a-f]+)/.exec(e))return+r[1];if(/\bwasm-function\[(\d+)\]:(\d+)/.exec(e))re("Legacy backtrace format detected but -sUSE_OFFSET_CONVERTER not present.");else if(r=/:(\d+):\d+(?:\)|$)/.exec(e))return 2147483648|+r[1];return 0},jn=e=>{e.forEach(r=>{var i=at(r);i&&(Ae[i]=r)})};function oa(){var e=Error().stack.toString().split(`
`);return e[0]=="Error"&&e.shift(),jn(e),Ae.Vb=at(e[3]),Ae.$b=e,Ae.Vb}function aa(e,r,i){if(e>>>=0,r>>>=0,Ae.Vb==e)var s=Ae.$b;else(s=Error().stack.toString().split(`
`))[0]=="Error"&&s.shift(),jn(s);for(var f=3;s[f]&&at(s[f])!=e;)++f;for(e=0;e<i&&s[e+f];++e)(b(),T)[r+4*e>>>2>>>0]=at(s[e+f]);return e}var kt,Wt={},Yn=()=>{if(!kt){var e,r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(e in Wt)Wt[e]===void 0?delete r[e]:r[e]=Wt[e];var i=[];for(e in r)i.push(`${e}=${r[e]}`);kt=i}return kt};function Jn(e,r){if(o)return W(19,1,e,r);e>>>=0,r>>>=0;var i,s=0,f=0;for(i of Yn()){var p=r+s;(b(),k)[e+f>>>2>>>0]=p,s+=Oe(i,p,1/0)+1,f+=4}return 0}function qn(e,r){if(o)return W(20,1,e,r);e>>>=0,r>>>=0;var i=Yn();for(var s of((b(),k)[e>>>2>>>0]=i.length,e=0,i))e+=Nt(s)+1;return(b(),k)[r>>>2>>>0]=e,0}function Xn(e){return o?W(21,1,e):52}function Zn(e,r,i,s){return o?W(22,1,e,r,i,s):52}function Qn(e,r,i,s){return o?W(23,1,e,r,i,s):70}var sa=[null,[],[]];function Kn(e,r,i,s){if(o)return W(24,1,e,r,i,s);r>>>=0,i>>>=0,s>>>=0;for(var f=0,p=0;p<i;p++){var E=(b(),k)[r>>>2>>>0],v=(b(),k)[r+4>>>2>>>0];r+=8;for(var B=0;B<v;B++){var C=e,te=(b(),Q)[E+B>>>0],le=sa[C];te===0||te===10?((C===1?M:P)(An(le)),le.length=0):le.push(te)}f+=v}return(b(),k)[s>>>2>>>0]=f,0}function ia(e){return e>>>0}o||function(){for(var e=t.numThreads-1;e--;)bn();$.push(()=>{pe++,function(r){o?r():Promise.all(ge.map(wn)).then(r)}(()=>Qe())})}(),o||(oe=new WebAssembly.Memory({initial:256,maximum:65536,shared:!0}),q()),t.wasmBinary&&(g=t.wasmBinary),t.stackSave=()=>D(),t.stackRestore=e=>L(e),t.stackAlloc=e=>Ht(e),t.setValue=function(e,r,i="i8"){switch(i.endsWith("*")&&(i="*"),i){case"i1":case"i8":(b(),Y)[e>>>0]=r;break;case"i16":(b(),Ce)[e>>>1>>>0]=r;break;case"i32":(b(),T)[e>>>2>>>0]=r;break;case"i64":(b(),ee)[e>>>3>>>0]=BigInt(r);break;case"float":(b(),Re)[e>>>2>>>0]=r;break;case"double":(b(),K)[e>>>3>>>0]=r;break;case"*":(b(),k)[e>>>2>>>0]=r;break;default:re(`invalid type for setValue: ${i}`)}},t.getValue=function(e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":return(b(),Y)[e>>>0];case"i16":return(b(),Ce)[e>>>1>>>0];case"i32":return(b(),T)[e>>>2>>>0];case"i64":return(b(),ee)[e>>>3>>>0];case"float":return(b(),Re)[e>>>2>>>0];case"double":return(b(),K)[e>>>3>>>0];case"*":return(b(),k)[e>>>2>>>0];default:re(`invalid type for getValue: ${r}`)}},t.UTF8ToString=Ct,t.stringToUTF8=Oe,t.lengthBytesUTF8=Nt;var ua=[Ke,dn,Sn,In,Bn,Pn,Ln,Dn,_n,Un,xn,Mn,Cn,Rn,Fn,Nn,zn,Hn,Vn,Jn,qn,Xn,Zn,Qn,Kn],er={862764:(e,r,i,s,f)=>{if(t===void 0||!t.Rb)return 1;if((e=Ct(Number(e>>>0))).startsWith("./")&&(e=e.substring(2)),!(e=t.Rb.get(e)))return 2;if(r=Number(r>>>0),i=Number(i>>>0),s=Number(s>>>0),r+i>e.byteLength)return 3;try{let p=e.subarray(r,r+i);switch(f){case 0:(b(),Q).set(p,s>>>0);break;case 1:t.hc?t.hc(s,p):t.jc(s,p);break;default:return 4}return 0}catch{return 4}},863588:()=>typeof wasmOffsetConverter<"u"};function fa(){return typeof wasmOffsetConverter<"u"}var Gt,tr,nr,$t,rr,or,ar,zt,sr,ir,_,Ve,ur,L,Ht,D,fr,cr,lr,dr,Ee=await async function(){function e(s,f){return Ee=s.exports,Ee=function(){var p=Ee,E=B=>()=>B()>>>0,v=B=>C=>B(C)>>>0;return(p=Object.assign({},p)).sb=E(p.sb),p.ub=v(p.ub),p.Ib=v(p.Ib),p.Jb=E(p.Jb),p.Nb=v(p.Nb),p}(),pn.push(Ee.vb),yn=Ee.wb,y=f,s=Ee,t._OrtInit=s.Ua,t._OrtGetLastError=s.Va,t._OrtCreateSessionOptions=s.Wa,t._OrtAppendExecutionProvider=s.Xa,t._OrtAddFreeDimensionOverride=s.Ya,t._OrtAddSessionConfigEntry=s.Za,t._OrtReleaseSessionOptions=s._a,t._OrtCreateSession=s.$a,t._OrtReleaseSession=s.ab,t._OrtGetInputOutputCount=s.bb,t._OrtGetInputOutputMetadata=s.cb,t._OrtFree=s.db,t._OrtCreateTensor=s.eb,t._OrtGetTensorData=s.fb,t._OrtReleaseTensor=s.gb,t._OrtCreateRunOptions=s.hb,t._OrtAddRunConfigEntry=s.ib,t._OrtReleaseRunOptions=s.jb,t._OrtCreateBinding=s.kb,t._OrtBindInput=s.lb,t._OrtBindOutput=s.mb,t._OrtClearBoundOutputs=s.nb,t._OrtReleaseBinding=s.ob,t._OrtRunWithBinding=s.pb,t._OrtRun=s.qb,t._OrtEndProfiling=s.rb,Gt=s.sb,t._free=tr=s.tb,t._malloc=nr=s.ub,$t=s.xb,rr=s.yb,or=s.zb,ar=s.Ab,zt=s.Bb,sr=s.Cb,ir=s.Db,_=s.Eb,Ve=s.Fb,ur=s.Gb,L=s.Hb,Ht=s.Ib,D=s.Jb,fr=s.Kb,cr=s.Lb,lr=s.Mb,dr=s.Nb,Qe(),Ee}pe++;var r,i=ue();return t.instantiateWasm?new Promise(s=>{t.instantiateWasm(i,(f,p)=>{s(e(f,p))})}):o?new Promise(s=>{N=f=>{var p=new WebAssembly.Instance(f,ue());s(e(p,f))}}):(Se??=t.locateFile?t.locateFile?t.locateFile("ort-wasm-simd-threaded.wasm",w):w+"ort-wasm-simd-threaded.wasm":new URL("ort-wasm-simd-threaded.wasm",import.meta.url).href,r=await async function(s){var f=Se;if(!g&&typeof WebAssembly.instantiateStreaming=="function"&&!Z(f))try{var p=fetch(f,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(p,s)}catch(E){P(`wasm streaming compile failed: ${E}`),P("falling back to ArrayBuffer instantiation")}return async function(E,v){try{var B=await async function(C){if(!g)try{var te=await d(C);return new Uint8Array(te)}catch{}if(C==Se&&g)C=new Uint8Array(g);else{if(!c)throw"both async and sync fetching of the wasm failed";C=c(C)}return C}(E);return await WebAssembly.instantiate(B,v)}catch(C){P(`failed to asynchronously prepare wasm: ${C}`),re(C)}}(f,s)}(i),e(r.instance,r.module))}();function ca(e,r,i,s){var f=D();try{return x(e)(r,i,s)}catch(p){if(L(f),p!==p+0)throw p;_(1,0)}}function la(e,r,i){var s=D();try{return x(e)(r,i)}catch(f){if(L(s),f!==f+0)throw f;_(1,0)}}function da(e,r,i){var s=D();try{x(e)(r,i)}catch(f){if(L(s),f!==f+0)throw f;_(1,0)}}function pa(e,r){var i=D();try{return x(e)(r)}catch(s){if(L(i),s!==s+0)throw s;_(1,0)}}function ma(e){var r=D();try{x(e)()}catch(i){if(L(r),i!==i+0)throw i;_(1,0)}}function ha(e,r,i,s,f,p,E){var v=D();try{return x(e)(r,i,s,f,p,E)}catch(B){if(L(v),B!==B+0)throw B;_(1,0)}}function wa(e,r){var i=D();try{x(e)(r)}catch(s){if(L(i),s!==s+0)throw s;_(1,0)}}function ba(e,r,i,s){var f=D();try{x(e)(r,i,s)}catch(p){if(L(f),p!==p+0)throw p;_(1,0)}}function ya(e,r,i,s,f){var p=D();try{x(e)(r,i,s,f)}catch(E){if(L(p),E!==E+0)throw E;_(1,0)}}function ga(e,r,i,s,f,p,E){var v=D();try{x(e)(r,i,s,f,p,E)}catch(B){if(L(v),B!==B+0)throw B;_(1,0)}}function Ea(e,r,i,s,f,p,E){var v=D();try{x(e)(r,i,s,f,p,E)}catch(B){if(L(v),B!==B+0)throw B;_(1,0)}}function Ta(e,r,i,s,f,p,E,v){var B=D();try{x(e)(r,i,s,f,p,E,v)}catch(C){if(L(B),C!==C+0)throw C;_(1,0)}}function Sa(e,r,i,s,f,p){var E=D();try{x(e)(r,i,s,f,p)}catch(v){if(L(E),v!==v+0)throw v;_(1,0)}}function va(e,r,i,s,f){var p=D();try{return x(e)(r,i,s,f)}catch(E){if(L(p),E!==E+0)throw E;_(1,0)}}function Oa(e,r,i,s,f,p,E,v){var B=D();try{x(e)(r,i,s,f,p,E,v)}catch(C){if(L(B),C!==C+0)throw C;_(1,0)}}function Aa(e,r,i,s,f,p,E,v,B,C,te,le){var we=D();try{x(e)(r,i,s,f,p,E,v,B,C,te,le)}catch(be){if(L(we),be!==be+0)throw be;_(1,0)}}function Ia(e,r,i,s,f,p){var E=D();try{return x(e)(r,i,s,f,p)}catch(v){if(L(E),v!==v+0)throw v;_(1,0)}}function Ba(e,r,i){var s=D();try{return x(e)(r,i)}catch(f){if(L(s),f!==f+0)throw f;return _(1,0),0n}}function Pa(e,r,i,s,f,p,E,v,B){var C=D();try{x(e)(r,i,s,f,p,E,v,B)}catch(te){if(L(C),te!==te+0)throw te;_(1,0)}}function La(e){var r=D();try{return x(e)()}catch(i){if(L(r),i!==i+0)throw i;_(1,0)}}function Da(e,r){var i=D();try{return x(e)(r)}catch(s){if(L(i),s!==s+0)throw s;return _(1,0),0n}}function _a(e){var r=D();try{return x(e)()}catch(i){if(L(r),i!==i+0)throw i;return _(1,0),0n}}function Ua(e,r,i,s,f,p){var E=D();try{return x(e)(r,i,s,f,p)}catch(v){if(L(E),v!==v+0)throw v;_(1,0)}}function xa(e,r,i,s,f,p){var E=D();try{return x(e)(r,i,s,f,p)}catch(v){if(L(E),v!==v+0)throw v;_(1,0)}}function Ma(e,r,i){var s=D();try{return x(e)(r,i)}catch(f){if(L(s),f!==f+0)throw f;_(1,0)}}function Ca(e,r,i,s,f,p,E,v){var B=D();try{return x(e)(r,i,s,f,p,E,v)}catch(C){if(L(B),C!==C+0)throw C;_(1,0)}}function Ra(e,r,i,s,f){var p=D();try{return x(e)(r,i,s,f)}catch(E){if(L(p),E!==E+0)throw E;return _(1,0),0n}}function Fa(e,r,i,s){var f=D();try{return x(e)(r,i,s)}catch(p){if(L(f),p!==p+0)throw p;_(1,0)}}function Na(e,r,i,s){var f=D();try{return x(e)(r,i,s)}catch(p){if(L(f),p!==p+0)throw p;_(1,0)}}function ka(e,r,i,s,f,p,E,v,B,C,te,le){var we=D();try{return x(e)(r,i,s,f,p,E,v,B,C,te,le)}catch(be){if(L(we),be!==be+0)throw be;_(1,0)}}function Wa(e,r,i,s,f,p,E,v,B,C,te){var le=D();try{x(e)(r,i,s,f,p,E,v,B,C,te)}catch(we){if(L(le),we!==we+0)throw we;_(1,0)}}function Ga(e,r,i,s,f,p,E,v,B,C,te,le,we,be,Ya,Ja){var qa=D();try{x(e)(r,i,s,f,p,E,v,B,C,te,le,we,be,Ya,Ja)}catch(Vt){if(L(qa),Vt!==Vt+0)throw Vt;_(1,0)}}function $a(e,r,i,s){var f=D();try{return x(e)(r,i,s)}catch(p){if(L(f),p!==p+0)throw p;_(1,0)}}function za(e,r,i,s,f){var p=D();try{return x(e)(r,i,s,f)}catch(E){if(L(p),E!==E+0)throw E;_(1,0)}}function Ha(e,r,i){var s=D();try{return x(e)(r,i)}catch(f){if(L(s),f!==f+0)throw f;_(1,0)}}function Va(e,r,i){var s=D();try{return x(e)(r,i)}catch(f){if(L(s),f!==f+0)throw f;_(1,0)}}function ja(e,r,i,s){var f=D();try{x(e)(r,i,s)}catch(p){if(L(f),p!==p+0)throw p;_(1,0)}}return function e(){if(0<pe)ye=e;else if(o)A?.(t),_t();else{for(;0<$.length;)$.shift()(t);0<pe?ye=e:(t.calledRun=!0,j||(_t(),A?.(t)))}}(),t.PTR_SIZE=4,V?t:new Promise((e,r)=>{A=e,U=r})}var rs,os,qr=R(()=>{"use strict";rs=Yr,os=globalThis.self?.name?.startsWith("em-pthread");os&&Yr()});var Qr,rn,as,ae,Kr,nn,ss,is,eo,us,Xr,to,Zr,no,lt=R(()=>{"use strict";ct();Qr=typeof location>"u"?void 0:location.origin,rn=import.meta.url>"file:"&&import.meta.url<"file;",as=()=>{if(!!1){if(rn){let n=URL;return new URL(new n("ort.wasm.bundle.min.mjs",import.meta.url).href,Qr).href}return import.meta.url}},ae=as(),Kr=()=>{if(ae&&!ae.startsWith("blob:"))return ae.substring(0,ae.lastIndexOf("/")+1)},nn=(n,t)=>{try{let a=t??ae;return(a?new URL(n,a):new URL(n)).origin===Qr}catch{return!1}},ss=(n,t)=>{let a=t??ae;try{return(a?new URL(n,a):new URL(n)).href}catch{return}},is=(n,t)=>`${t??"./"}${n}`,eo=async n=>{let a=await(await fetch(n,{credentials:"same-origin"})).blob();return URL.createObjectURL(a)},us=async n=>(await import(/*webpackIgnore:true*/n)).default,Xr=(jr(),Jt(Vr)).default,to=async()=>{if(!ae)throw new Error("Failed to load proxy worker: cannot determine the script source URL.");if(nn(ae))return[void 0,Xr()];let n=await eo(ae);return[n,Xr(n)]},Zr=(qr(),Jt(Jr)).default,no=async(n,t,a,u)=>{let o=Zr&&!(n||t);if(o)if(ae)o=nn(ae);else if(u&&!a)o=!0;else throw new Error("cannot determine the script source URL.");if(o)return[void 0,Zr];{let d="ort-wasm-simd-threaded.mjs",c=n??ss(d,t),l=!!1&&a&&c&&!nn(c,t),m=l?await eo(c):c??is(d,t);return[l?m:void 0,await us(m)]}}});var on,an,Et,ro,fs,cs,ls,dt,G,Ue=R(()=>{"use strict";lt();an=!1,Et=!1,ro=!1,fs=()=>{if(typeof SharedArrayBuffer>"u")return!1;try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},cs=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},ls=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,19,1,17,0,65,1,253,15,65,2,253,15,65,3,253,15,253,147,2,11]))}catch{return!1}},dt=async n=>{if(an)return Promise.resolve();if(Et)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(ro)throw new Error("previous call to 'initializeWebAssembly()' failed.");Et=!0;let t=n.initTimeout,a=n.numThreads;if(n.simd!==!1){if(n.simd==="relaxed"){if(!ls())throw new Error("Relaxed WebAssembly SIMD is not supported in the current environment.")}else if(!cs())throw new Error("WebAssembly SIMD is not supported in the current environment.")}let u=fs();a>1&&!u&&(typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+a+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),console.warn("WebAssembly multi-threading is not supported in the current environment. Falling back to single-threading."),n.numThreads=a=1);let o=n.wasmPaths,d=typeof o=="string"?o:void 0,c=o?.mjs,l=c?.href??c,m=o?.wasm,h=m?.href??m,w=n.wasmBinary,[g,y]=await no(l,d,a>1,!!w||!!h),S=!1,A=[];if(t>0&&A.push(new Promise(U=>{setTimeout(()=>{S=!0,U()},t)})),A.push(new Promise((U,N)=>{let O={numThreads:a};if(w)O.wasmBinary=w;else if(h||d)O.locateFile=I=>h??d+I;else if(l&&l.indexOf("blob:")!==0)O.locateFile=I=>new URL(I,l).href;else if(g){let I=Kr();I&&(O.locateFile=H=>I+H)}y(O).then(I=>{Et=!1,an=!0,on=I,U(),g&&URL.revokeObjectURL(g)},I=>{Et=!1,ro=!0,N(I)})})),await Promise.race(A),S)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},G=()=>{if(an&&on)return on;throw new Error("WebAssembly is not initialized yet.")}});var se,qe,F,Tt=R(()=>{"use strict";Ue();se=(n,t)=>{let a=G(),u=a.lengthBytesUTF8(n)+1,o=a._malloc(u);return a.stringToUTF8(n,o,u),t.push(o),o},qe=(n,t,a,u)=>{if(typeof n=="object"&&n!==null){if(a.has(n))throw new Error("Circular reference in options");a.add(n)}Object.entries(n).forEach(([o,d])=>{let c=t?t+o:o;if(typeof d=="object")qe(d,c+".",a,u);else if(typeof d=="string"||typeof d=="number")u(c,d.toString());else if(typeof d=="boolean")u(c,d?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof d}`)})},F=n=>{let t=G(),a=t.stackSave();try{let u=t.PTR_SIZE,o=t.stackAlloc(2*u);t._OrtGetLastError(o,o+u);let d=Number(t.getValue(o,u===4?"i32":"i64")),c=t.getValue(o+u,"*"),l=c?t.UTF8ToString(c):"";throw new Error(`${n} ERROR_CODE: ${d}, ERROR_MESSAGE: ${l}`)}finally{t.stackRestore(a)}}});var oo,ao=R(()=>{"use strict";Ue();Tt();oo=n=>{let t=G(),a=0,u=[],o=n||{};try{if(n?.logSeverityLevel===void 0)o.logSeverityLevel=2;else if(typeof n.logSeverityLevel!="number"||!Number.isInteger(n.logSeverityLevel)||n.logSeverityLevel<0||n.logSeverityLevel>4)throw new Error(`log severity level is not valid: ${n.logSeverityLevel}`);if(n?.logVerbosityLevel===void 0)o.logVerbosityLevel=0;else if(typeof n.logVerbosityLevel!="number"||!Number.isInteger(n.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${n.logVerbosityLevel}`);n?.terminate===void 0&&(o.terminate=!1);let d=0;return n?.tag!==void 0&&(d=se(n.tag,u)),a=t._OrtCreateRunOptions(o.logSeverityLevel,o.logVerbosityLevel,!!o.terminate,d),a===0&&F("Can't create run options."),n?.extra!==void 0&&qe(n.extra,"",new WeakSet,(c,l)=>{let m=se(c,u),h=se(l,u);t._OrtAddRunConfigEntry(a,m,h)!==0&&F(`Can't set a run config entry: ${c} - ${l}.`)}),[a,u]}catch(d){throw a!==0&&t._OrtReleaseRunOptions(a),u.forEach(c=>t._free(c)),d}}});var ds,ps,ms,St,hs,so,io=R(()=>{"use strict";Ue();Tt();ds=n=>{switch(n){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"layout":return 3;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${n}`)}},ps=n=>{switch(n){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${n}`)}},ms=n=>{n.extra||(n.extra={}),n.extra.session||(n.extra.session={});let t=n.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),n.executionProviders&&n.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(n.enableMemPattern=!1)},St=(n,t,a,u)=>{let o=se(t,u),d=se(a,u);G()._OrtAddSessionConfigEntry(n,o,d)!==0&&F(`Can't set a session config entry: ${t} - ${a}.`)},hs=async(n,t,a)=>{for(let u of t){let o=typeof u=="string"?u:u.name,d=[];switch(o){case"webnn":if(o="WEBNN",typeof u!="string"){let g=u?.deviceType;g&&St(n,"deviceType",g,a)}break;case"webgpu":if(o="JS",typeof u!="string"){let w=u;if(w?.preferredLayout){if(w.preferredLayout!=="NCHW"&&w.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${w.preferredLayout}`);St(n,"preferredLayout",w.preferredLayout,a)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${o}`)}let c=se(o,a),l=d.length,m=0,h=0;if(l>0){m=G()._malloc(l*G().PTR_SIZE),a.push(m),h=G()._malloc(l*G().PTR_SIZE),a.push(h);for(let w=0;w<l;w++)G().setValue(m+w*G().PTR_SIZE,d[w][0],"*"),G().setValue(h+w*G().PTR_SIZE,d[w][1],"*")}await G()._OrtAppendExecutionProvider(n,c,m,h,l)!==0&&F(`Can't append execution provider: ${o}.`)}},so=async n=>{let t=G(),a=0,u=[],o=n||{};ms(o);try{let d=ds(o.graphOptimizationLevel??"all"),c=ps(o.executionMode??"sequential"),l=typeof o.logId=="string"?se(o.logId,u):0,m=o.logSeverityLevel??2;if(!Number.isInteger(m)||m<0||m>4)throw new Error(`log severity level is not valid: ${m}`);let h=o.logVerbosityLevel??0;if(!Number.isInteger(h)||h<0||h>4)throw new Error(`log verbosity level is not valid: ${h}`);let w=typeof o.optimizedModelFilePath=="string"?se(o.optimizedModelFilePath,u):0;if(a=t._OrtCreateSessionOptions(d,!!o.enableCpuMemArena,!!o.enableMemPattern,c,!!o.enableProfiling,0,l,m,h,w),a===0&&F("Can't create session options."),o.executionProviders&&await hs(a,o.executionProviders,u),o.enableGraphCapture!==void 0){if(typeof o.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${o.enableGraphCapture}`);St(a,"enableGraphCapture",o.enableGraphCapture.toString(),u)}if(o.freeDimensionOverrides)for(let[g,y]of Object.entries(o.freeDimensionOverrides)){if(typeof g!="string")throw new Error(`free dimension override name must be a string: ${g}`);if(typeof y!="number"||!Number.isInteger(y)||y<0)throw new Error(`free dimension override value must be a non-negative integer: ${y}`);let S=se(g,u);t._OrtAddFreeDimensionOverride(a,S,y)!==0&&F(`Can't set a free dimension override: ${g} - ${y}.`)}return o.extra!==void 0&&qe(o.extra,"",new WeakSet,(g,y)=>{St(a,g,y,u)}),[a,u]}catch(d){throw a!==0&&t._OrtReleaseSessionOptions(a)!==0&&F("Can't release session options."),u.forEach(c=>t._free(c)),d}}});var Ne,vt,ke,uo,fo,Ot,At,co,sn=R(()=>{"use strict";Ne=n=>{switch(n){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;case"int4":return 22;case"uint4":return 21;default:throw new Error(`unsupported data type: ${n}`)}},vt=n=>{switch(n){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";case 22:return"int4";case 21:return"uint4";default:throw new Error(`unsupported data type: ${n}`)}},ke=(n,t)=>{let a=[-1,4,1,1,2,2,4,8,-1,1,2,8,4,8,-1,-1,-1,-1,-1,-1,-1,.5,.5][n],u=typeof t=="number"?t:t.reduce((o,d)=>o*d,1);return a>0?Math.ceil(u*a):void 0},uo=n=>{switch(n){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${n}`)}},fo=n=>{switch(n){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${n}`)}},Ot=n=>n==="float32"||n==="float16"||n==="int32"||n==="int64"||n==="uint32"||n==="uint8"||n==="bool"||n==="uint4"||n==="int4",At=n=>n==="float32"||n==="float16"||n==="int32"||n==="int64"||n==="uint32"||n==="uint64"||n==="int8"||n==="uint8"||n==="bool"||n==="uint4"||n==="int4",co=n=>{switch(n){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;case"ml-tensor":return 5;default:throw new Error(`unsupported data location: ${n}`)}}});var Xe,un=R(()=>{"use strict";ct();Xe=async n=>{if(typeof n=="string")if(!1)try{let{readFile:t}=Yt("node:fs/promises");return new Uint8Array(await t(n))}catch(t){if(t.code==="ERR_FS_FILE_TOO_LARGE"){let{createReadStream:a}=Yt("node:fs"),u=a(n),o=[];for await(let d of u)o.push(d);return new Uint8Array(Buffer.concat(o))}throw t}else{let t=await fetch(n);if(!t.ok)throw new Error(`failed to load external data file: ${n}`);let a=t.headers.get("Content-Length"),u=a?parseInt(a,10):0;if(u<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${n}, no response body.`);let o=t.body.getReader(),d;try{d=new ArrayBuffer(u)}catch(l){if(l instanceof RangeError){let m=Math.ceil(u/65536);d=new WebAssembly.Memory({initial:m,maximum:m}).buffer}else throw l}let c=0;for(;;){let{done:l,value:m}=await o.read();if(l)break;let h=m.byteLength;new Uint8Array(d,c,h).set(m),c+=h}return new Uint8Array(d,0,u)}}else return n instanceof Blob?new Uint8Array(await n.arrayBuffer()):n instanceof Uint8Array?n:new Uint8Array(n)}});var ws,pt,mt,We,bs,lo,Je,ht,wt,po,bt,yt,gt,tn=R(()=>{"use strict";Te();ao();io();sn();Ue();Tt();un();ws=(n,t)=>{G()._OrtInit(n,t)!==0&&F("Can't initialize onnxruntime.")},pt=async n=>{ws(n.wasm.numThreads,fo(n.logLevel))},mt=async(n,t)=>{G().asyncInit?.();let a=n.webgpu.adapter;if(t==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");if(a){if(typeof a.limits!="object"||typeof a.features!="object"||typeof a.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let u=n.webgpu.powerPreference;if(u!==void 0&&u!=="low-power"&&u!=="high-performance")throw new Error(`Invalid powerPreference setting: "${u}"`);let o=n.webgpu.forceFallbackAdapter;if(o!==void 0&&typeof o!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${o}"`);if(a=await navigator.gpu.requestAdapter({powerPreference:u,forceFallbackAdapter:o}),!a)throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.')}}if(t==="webnn"&&(typeof navigator>"u"||!navigator.ml))throw new Error("WebNN is not supported in current environment")},We=new Map,bs=n=>{let t=G(),a=t.stackSave();try{let u=t.PTR_SIZE,o=t.stackAlloc(2*u);t._OrtGetInputOutputCount(n,o,o+u)!==0&&F("Can't get session input/output count.");let c=u===4?"i32":"i64";return[Number(t.getValue(o,c)),Number(t.getValue(o+u,c))]}finally{t.stackRestore(a)}},lo=(n,t)=>{let a=G(),u=a.stackSave(),o=0;try{let d=a.PTR_SIZE,c=a.stackAlloc(2*d);a._OrtGetInputOutputMetadata(n,t,c,c+d)!==0&&F("Can't get session input/output metadata.");let m=Number(a.getValue(c,"*"));o=Number(a.getValue(c+d,"*"));let h=a.HEAP32[o/4];if(h===0)return[m,0];let w=a.HEAPU32[o/4+1],g=[];for(let y=0;y<w;y++){let S=Number(a.getValue(o+8+y*d,"*"));g.push(S!==0?a.UTF8ToString(S):Number(a.getValue(o+8+(y+w)*d,"*")))}return[m,h,g]}finally{a.stackRestore(u),o!==0&&a._OrtFree(o)}},Je=n=>{let t=G(),a=t._malloc(n.byteLength);if(a===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${n.byteLength}.`);return t.HEAPU8.set(n,a),[a,n.byteLength]},ht=async(n,t)=>{let a,u,o=G();Array.isArray(n)?[a,u]=n:n.buffer===o.HEAPU8.buffer?[a,u]=[n.byteOffset,n.byteLength]:[a,u]=Je(n);let d=0,c=0,l=0,m=[],h=[],w=[];try{if([c,m]=await so(t),t?.externalData&&o.mountExternalData){let M=[];for(let P of t.externalData){let j=typeof P=="string"?P:P.path;M.push(Xe(typeof P=="string"?P:P.data).then(Z=>{o.mountExternalData(j,Z)}))}await Promise.all(M)}for(let M of t?.executionProviders??[])if((typeof M=="string"?M:M.name)==="webnn"){if(o.shouldTransferToMLTensor=!1,typeof M!="string"){let j=M,Z=j?.context,b=j?.gpuDevice,me=j?.deviceType,oe=j?.powerPreference;Z?o.currentContext=Z:b?o.currentContext=await o.webnnCreateMLContext(b):o.currentContext=await o.webnnCreateMLContext({deviceType:me,powerPreference:oe})}else o.currentContext=await o.webnnCreateMLContext();break}d=await o._OrtCreateSession(a,u,c),o.webgpuOnCreateSession?.(d),d===0&&F("Can't create a session."),o.jsepOnCreateSession?.(),o.currentContext&&(o.webnnRegisterMLContext(d,o.currentContext),o.currentContext=void 0,o.shouldTransferToMLTensor=!0);let[g,y]=bs(d),S=!!t?.enableGraphCapture,A=[],U=[],N=[],O=[],I=[];for(let M=0;M<g;M++){let[P,j,Z]=lo(d,M);P===0&&F("Can't get an input name."),h.push(P);let b=o.UTF8ToString(P);A.push(b),N.push(j===0?{name:b,isTensor:!1}:{name:b,isTensor:!0,type:vt(j),shape:Z})}for(let M=0;M<y;M++){let[P,j,Z]=lo(d,M+g);P===0&&F("Can't get an output name."),w.push(P);let b=o.UTF8ToString(P);U.push(b),O.push(j===0?{name:b,isTensor:!1}:{name:b,isTensor:!0,type:vt(j),shape:Z})}return We.set(d,[d,h,w,null,S,!1]),[d,A,U,N,O]}catch(g){throw h.forEach(y=>o._OrtFree(y)),w.forEach(y=>o._OrtFree(y)),l!==0&&o._OrtReleaseBinding(l)!==0&&F("Can't release IO binding."),d!==0&&o._OrtReleaseSession(d)!==0&&F("Can't release session."),g}finally{o._free(a),c!==0&&o._OrtReleaseSessionOptions(c)!==0&&F("Can't release session options."),m.forEach(g=>o._free(g)),o.unmountExternalData?.()}},wt=n=>{let t=G(),a=We.get(n);if(!a)throw new Error(`cannot release session. invalid session id: ${n}`);let[u,o,d,c,l]=a;c&&(l&&t._OrtClearBoundOutputs(c.handle)!==0&&F("Can't clear bound outputs."),t._OrtReleaseBinding(c.handle)!==0&&F("Can't release IO binding.")),t.jsepOnReleaseSession?.(n),t.webnnOnReleaseSession?.(n),t.webgpuOnReleaseSession?.(n),o.forEach(m=>t._OrtFree(m)),d.forEach(m=>t._OrtFree(m)),t._OrtReleaseSession(u)!==0&&F("Can't release session."),We.delete(n)},po=async(n,t,a,u,o,d,c=!1)=>{if(!n){t.push(0);return}let l=G(),m=l.PTR_SIZE,h=n[0],w=n[1],g=n[3],y=g,S,A;if(h==="string"&&(g==="gpu-buffer"||g==="ml-tensor"))throw new Error("String tensor is not supported on GPU.");if(c&&g!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${d} when enableGraphCapture is true.`);if(g==="gpu-buffer"){let O=n[2].gpuBuffer;A=ke(Ne(h),w);{let I=l.jsepRegisterBuffer;if(!I)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');S=I(u,d,O,A)}}else if(g==="ml-tensor"){let O=n[2].mlTensor;A=ke(Ne(h),w);let I=l.webnnRegisterMLTensor;if(!I)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');S=I(u,O,Ne(h),w)}else{let O=n[2];if(Array.isArray(O)){A=m*O.length,S=l._malloc(A),a.push(S);for(let I=0;I<O.length;I++){if(typeof O[I]!="string")throw new TypeError(`tensor data at index ${I} is not a string`);l.setValue(S+I*m,se(O[I],a),"*")}}else{let I=l.webnnIsGraphInput,H=l.webnnIsGraphOutput;if(h!=="string"&&I&&H){let M=l.UTF8ToString(o);if(I(u,M)||H(u,M)){let P=Ne(h);A=ke(P,w),y="ml-tensor";let j=l.webnnCreateTemporaryTensor,Z=l.webnnUploadTensor;if(!j||!Z)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');let b=await j(u,P,w);Z(b,new Uint8Array(O.buffer,O.byteOffset,O.byteLength)),S=b}else A=O.byteLength,S=l._malloc(A),a.push(S),l.HEAPU8.set(new Uint8Array(O.buffer,O.byteOffset,A),S)}else A=O.byteLength,S=l._malloc(A),a.push(S),l.HEAPU8.set(new Uint8Array(O.buffer,O.byteOffset,A),S)}}let U=l.stackSave(),N=l.stackAlloc(4*w.length);try{w.forEach((I,H)=>l.setValue(N+H*m,I,m===4?"i32":"i64"));let O=l._OrtCreateTensor(Ne(h),S,A,N,w.length,co(y));O===0&&F(`Can't create tensor for input/output. session=${u}, index=${d}.`),t.push(O)}finally{l.stackRestore(U)}},bt=async(n,t,a,u,o,d)=>{let c=G(),l=c.PTR_SIZE,m=We.get(n);if(!m)throw new Error(`cannot run inference. invalid session id: ${n}`);let h=m[0],w=m[1],g=m[2],y=m[3],S=m[4],A=m[5],U=t.length,N=u.length,O=0,I=[],H=[],M=[],P=[],j=c.stackSave(),Z=c.stackAlloc(U*l),b=c.stackAlloc(U*l),me=c.stackAlloc(N*l),oe=c.stackAlloc(N*l);try{[O,I]=oo(d),De("wasm prepareInputOutputTensor");for(let T=0;T<U;T++)await po(a[T],H,P,n,w[t[T]],t[T],S);for(let T=0;T<N;T++)await po(o[T],M,P,n,g[u[T]],U+u[T],S);_e("wasm prepareInputOutputTensor");for(let T=0;T<U;T++)c.setValue(Z+T*l,H[T],"*"),c.setValue(b+T*l,w[t[T]],"*");for(let T=0;T<N;T++)c.setValue(me+T*l,M[T],"*"),c.setValue(oe+T*l,g[u[T]],"*");c.jsepOnRunStart?.(h),c.webnnOnRunStart?.(h);let Y;Y=await c._OrtRun(h,b,Z,U,oe,N,me,O),Y!==0&&F("failed to call OrtRun().");let Q=[],Ce=[];De("wasm ProcessOutputTensor");for(let T=0;T<N;T++){let k=Number(c.getValue(me+T*l,"*"));if(k===M[T]){Q.push(o[T]);continue}let Re=c.stackSave(),K=c.stackAlloc(4*l),ee=!1,V,q=0;try{c._OrtGetTensorData(k,K,K+l,K+2*l,K+3*l)!==0&&F(`Can't access output tensor data on index ${T}.`);let Se=l===4?"i32":"i64",pe=Number(c.getValue(K,Se));q=c.getValue(K+l,"*");let ye=c.getValue(K+l*2,"*"),Qe=Number(c.getValue(K+l*3,Se)),re=[];for(let J=0;J<Qe;J++)re.push(Number(c.getValue(ye+J*l,Se)));c._OrtFree(ye)!==0&&F("Can't free memory for tensor dims.");let ue=re.reduce((J,$)=>J*$,1);V=vt(pe);let he=y?.outputPreferredLocations[u[T]];if(V==="string"){if(he==="gpu-buffer"||he==="ml-tensor")throw new Error("String tensor is not supported on GPU.");let J=[];for(let $=0;$<ue;$++){let fe=c.getValue(q+$*l,"*"),ce=c.getValue(q+($+1)*l,"*"),W=$===ue-1?void 0:ce-fe;J.push(c.UTF8ToString(fe,W))}Q.push([V,re,J,"cpu"])}else if(he==="gpu-buffer"&&ue>0){let J=c.jsepGetBuffer;if(!J)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let $=J(q),fe=ke(pe,ue);if(fe===void 0||!Ot(V))throw new Error(`Unsupported data type: ${V}`);ee=!0,Q.push([V,re,{gpuBuffer:$,download:c.jsepCreateDownloader($,fe,V),dispose:()=>{c._OrtReleaseTensor(k)!==0&&F("Can't release tensor.")}},"gpu-buffer"])}else if(he==="ml-tensor"&&ue>0){let J=c.webnnEnsureTensor,$=c.webnnIsGraphInputOutputTypeSupported;if(!J||!$)throw new Error('preferredLocation "ml-tensor" is not supported without using WebNN.');if(ke(pe,ue)===void 0||!At(V))throw new Error(`Unsupported data type: ${V}`);if(!$(n,V,!1))throw new Error(`preferredLocation "ml-tensor" for ${V} output is not supported by current WebNN Context.`);let ce=await J(n,q,pe,re,!1);ee=!0,Q.push([V,re,{mlTensor:ce,download:c.webnnCreateMLTensorDownloader(q,V),dispose:()=>{c.webnnReleaseTensorId(q),c._OrtReleaseTensor(k)}},"ml-tensor"])}else if(he==="ml-tensor-cpu-output"&&ue>0){let J=c.webnnCreateMLTensorDownloader(q,V)(),$=Q.length;ee=!0,Ce.push((async()=>{let fe=[$,await J];return c.webnnReleaseTensorId(q),c._OrtReleaseTensor(k),fe})()),Q.push([V,re,[],"cpu"])}else{let J=uo(V),$=new J(ue);new Uint8Array($.buffer,$.byteOffset,$.byteLength).set(c.HEAPU8.subarray(q,q+$.byteLength)),Q.push([V,re,$,"cpu"])}}finally{c.stackRestore(Re),V==="string"&&q&&c._free(q),ee||c._OrtReleaseTensor(k)}}y&&!S&&(c._OrtClearBoundOutputs(y.handle)!==0&&F("Can't clear bound outputs."),We.set(n,[h,w,g,y,S,!1]));for(let[T,k]of await Promise.all(Ce))Q[T][2]=k;return _e("wasm ProcessOutputTensor"),Q}finally{c.webnnOnRunEnd?.(h),c.stackRestore(j),H.forEach(Y=>c._OrtReleaseTensor(Y)),M.forEach(Y=>c._OrtReleaseTensor(Y)),P.forEach(Y=>c._free(Y)),O!==0&&c._OrtReleaseRunOptions(O),I.forEach(Y=>c._free(Y))}},yt=n=>{let t=G(),a=We.get(n);if(!a)throw new Error("invalid session id");let u=a[0],o=t._OrtEndProfiling(u);o===0&&F("Can't get an profile file name."),t._OrtFree(o)},gt=n=>{let t=[];for(let a of n){let u=a[2];!Array.isArray(u)&&"buffer"in u&&t.push(u.buffer)}return t}});var Me,ie,Ze,Bt,Pt,It,fn,cn,Ge,$e,gs,mo,ho,wo,bo,yo,go,Eo,ln=R(()=>{"use strict";Te();tn();Ue();lt();Me=()=>!!z.wasm.proxy&&typeof document<"u",Ze=!1,Bt=!1,Pt=!1,cn=new Map,Ge=(n,t)=>{let a=cn.get(n);a?a.push(t):cn.set(n,[t])},$e=()=>{if(Ze||!Bt||Pt||!ie)throw new Error("worker not ready")},gs=n=>{switch(n.data.type){case"init-wasm":Ze=!1,n.data.err?(Pt=!0,fn[1](n.data.err)):(Bt=!0,fn[0]()),It&&(URL.revokeObjectURL(It),It=void 0);break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let t=cn.get(n.data.type);n.data.err?t.shift()[1](n.data.err):t.shift()[0](n.data.out);break}default:}},mo=async()=>{if(!Bt){if(Ze)throw new Error("multiple calls to 'initWasm()' detected.");if(Pt)throw new Error("previous call to 'initWasm()' failed.");if(Ze=!0,Me())return new Promise((n,t)=>{ie?.terminate(),to().then(([a,u])=>{try{ie=u,ie.onerror=d=>t(d),ie.onmessage=gs,fn=[n,t];let o={type:"init-wasm",in:z};!o.in.wasm.wasmPaths&&(a||rn)&&(o.in.wasm.wasmPaths={wasm:new URL("ort-wasm-simd-threaded.wasm",import.meta.url).href}),ie.postMessage(o),It=a}catch(o){t(o)}},t)});try{await dt(z.wasm),await pt(z),Bt=!0}catch(n){throw Pt=!0,n}finally{Ze=!1}}},ho=async n=>{if(Me())return $e(),new Promise((t,a)=>{Ge("init-ep",[t,a]);let u={type:"init-ep",in:{epName:n,env:z}};ie.postMessage(u)});await mt(z,n)},wo=async n=>Me()?($e(),new Promise((t,a)=>{Ge("copy-from",[t,a]);let u={type:"copy-from",in:{buffer:n}};ie.postMessage(u,[n.buffer])})):Je(n),bo=async(n,t)=>{if(Me()){if(t?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return $e(),new Promise((a,u)=>{Ge("create",[a,u]);let o={type:"create",in:{model:n,options:{...t}}},d=[];n instanceof Uint8Array&&d.push(n.buffer),ie.postMessage(o,d)})}else return ht(n,t)},yo=async n=>{if(Me())return $e(),new Promise((t,a)=>{Ge("release",[t,a]);let u={type:"release",in:n};ie.postMessage(u)});wt(n)},go=async(n,t,a,u,o,d)=>{if(Me()){if(a.some(c=>c[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(o.some(c=>c))throw new Error("pre-allocated output tensor is not supported for proxy.");return $e(),new Promise((c,l)=>{Ge("run",[c,l]);let m=a,h={type:"run",in:{sessionId:n,inputIndices:t,inputs:m,outputIndices:u,options:d}};ie.postMessage(h,gt(m))})}else return bt(n,t,a,u,o,d)},Eo=async n=>{if(Me())return $e(),new Promise((t,a)=>{Ge("end-profiling",[t,a]);let u={type:"end-profiling",in:n};ie.postMessage(u)});yt(n)}});var To,Es,Lt,So=R(()=>{"use strict";Te();ln();sn();ct();un();To=(n,t)=>{switch(n.location){case"cpu":return[n.type,n.dims,n.data,"cpu"];case"gpu-buffer":return[n.type,n.dims,{gpuBuffer:n.gpuBuffer},"gpu-buffer"];case"ml-tensor":return[n.type,n.dims,{mlTensor:n.mlTensor},"ml-tensor"];default:throw new Error(`invalid data location: ${n.location} for ${t()}`)}},Es=n=>{switch(n[3]){case"cpu":return new de(n[0],n[2],n[1]);case"gpu-buffer":{let t=n[0];if(!Ot(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:a,download:u,dispose:o}=n[2];return de.fromGpuBuffer(a,{dataType:t,dims:n[1],download:u,dispose:o})}case"ml-tensor":{let t=n[0];if(!At(t))throw new Error(`not supported data type: ${t} for deserializing MLTensor tensor`);let{mlTensor:a,download:u,dispose:o}=n[2];return de.fromMLTensor(a,{dataType:t,dims:n[1],download:u,dispose:o})}default:throw new Error(`invalid data location: ${n[3]}`)}},Lt=class{async fetchModelAndCopyToWasmMemory(t){return wo(await Xe(t))}async loadModel(t,a){Pe();let u;typeof t=="string"?u=await this.fetchModelAndCopyToWasmMemory(t):u=t,[this.sessionId,this.inputNames,this.outputNames,this.inputMetadata,this.outputMetadata]=await bo(u,a),Le()}async dispose(){return yo(this.sessionId)}async run(t,a,u){Pe();let o=[],d=[];Object.entries(t).forEach(y=>{let S=y[0],A=y[1],U=this.inputNames.indexOf(S);if(U===-1)throw new Error(`invalid input '${S}'`);o.push(A),d.push(U)});let c=[],l=[];Object.entries(a).forEach(y=>{let S=y[0],A=y[1],U=this.outputNames.indexOf(S);if(U===-1)throw new Error(`invalid output '${S}'`);c.push(A),l.push(U)});let m=o.map((y,S)=>To(y,()=>`input "${this.inputNames[d[S]]}"`)),h=c.map((y,S)=>y?To(y,()=>`output "${this.outputNames[l[S]]}"`):null),w=await go(this.sessionId,d,m,l,h,u),g={};for(let y=0;y<w.length;y++)g[this.outputNames[l[y]]]=c[y]??Es(w[y]);return Le(),g}startProfiling(){}endProfiling(){Eo(this.sessionId)}}});var Oo={};st(Oo,{OnnxruntimeWebAssemblyBackend:()=>Dt,initializeFlags:()=>vo,wasmBackend:()=>Ts});var vo,Dt,Ts,Ao=R(()=>{"use strict";Te();ln();So();vo=()=>{(typeof z.wasm.initTimeout!="number"||z.wasm.initTimeout<0)&&(z.wasm.initTimeout=0);let n=z.wasm.simd;if(typeof n!="boolean"&&n!==void 0&&n!=="fixed"&&n!=="relaxed"&&(console.warn(`Property "env.wasm.simd" is set to unknown value "${n}". Reset it to \`false\` and ignore SIMD feature checking.`),z.wasm.simd=!1),typeof z.wasm.proxy!="boolean"&&(z.wasm.proxy=!1),typeof z.wasm.trace!="boolean"&&(z.wasm.trace=!1),typeof z.wasm.numThreads!="number"||!Number.isInteger(z.wasm.numThreads)||z.wasm.numThreads<=0)if(typeof self<"u"&&!self.crossOriginIsolated)z.wasm.numThreads=1;else{let t=typeof navigator>"u"?Yt("node:os").cpus().length:navigator.hardwareConcurrency;z.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},Dt=class{async init(t){vo(),await mo(),await ho(t)}async createInferenceSessionHandler(t,a){let u=new Lt;return await u.loadModel(t,a),u}},Ts=new Dt});Te();Te();Te();var $r="1.23.0-dev.20250906-ecb26fb775";var au=en;{let n=(Ao(),Jt(Oo)).wasmBackend;je("cpu",n,10),je("wasm",n,10)}Object.defineProperty(z.versions,"web",{value:$r,enumerable:!0});export{ts as InferenceSession,Mr as TRACE,De as TRACE_EVENT_BEGIN,_e as TRACE_EVENT_END,Pe as TRACE_FUNC_BEGIN,Le as TRACE_FUNC_END,de as Tensor,au as default,z as env,je as registerBackend};
//# sourceMappingURL=ort.wasm.bundle.min.mjs.map
